(this["webpackJsonpquiz-app"]=this["webpackJsonpquiz-app"]||[]).push([[0],{165:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(65),a=n.n(r),i=(n(165),n(31)),s=n(10),o=n(314),l=n(294),u=n(295),j=n(296),b=n(312),d=n(44),h=n(118),O=(n(167),n(269),n(270),h.a.initializeApp({apiKey:"AIzaSyAIUyXqlnq0_p7Dtoej_vx1nQvWS-qUcU0",authDomain:"react-69990.firebaseapp.com",databaseURL:"https://react-69990-default-rtdb.europe-west1.firebasedatabase.app",projectId:"react-69990",storageBucket:"react-69990.appspot.com",messagingSenderId:"569670275960",appId:"1:569670275960:web:872cb0c1b85921ca502e8d"})),x=h.a.auth(),f=O.firestore(),p=O.database(),m=n(9),g=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){p.ref("/list").on("value",(function(e){var t=e.val()||null;t&&r(Object.values(t))}))}),[]),Object(m.jsxs)(o.c,{pt:6,spacing:4,children:[Object(m.jsx)(l.a,{pb:3,children:"Quizs"}),null!==n&&n.map((function(e,t){return Object(m.jsx)(o.a,{display:"flex",justifyContent:"space-between",borderRadius:30,borderWidth:1,bg:"gray.300",children:Object(m.jsxs)(u.a,{p:4,w:"400px",h:"70px",justifyContent:"space-between",align:"center",children:[Object(m.jsx)(j.a,{fontSize:20,children:e.name}),Object(m.jsx)(d.b,{to:"/Quiz/quiz/".concat(t+1),children:Object(m.jsx)(b.a,{size:"md",height:"48px",width:"100px",borderRadius:15,bg:"gray.800",color:"white",_hover:{bg:"gray.700"},children:"Play"})})]})},t)})),")"]})},v=n(297),w=n(300),y=n(315),S=n(77),z=n(298),C=n(299),q=n(0),A=n.n(q),Q=n(5),R=Object(c.createContext)();function k(){return Object(c.useContext)(R)}var U=function(e){var t=Object(c.useState)(),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)([{isAdmin:!1,isMod:!1}]),l=Object(s.a)(o,2),u=l[0],j=l[1],b=Object(c.useState)(!0),d=Object(s.a)(b,2),h=d[0],O=d[1],p=Object(c.useState)(""),g=Object(s.a)(p,2),v=g[0],w=g[1],y=Object(i.g)(),S=function(){var e=Object(Q.a)(A.a.mark((function e(t,n,c,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.createUserWithEmailAndPassword(t,n).then((function(e){f.collection("users").doc(x.currentUser.uid).set({userInfo:{firstName:c,lastName:r,email:t,uid:e.user.uid,roles:u}})})).catch((function(){return w("Email is already used!")}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c,r){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return x.onAuthStateChanged((function(e){(a(e),e)&&(y.replace("/Quiz/"),f.collection("users").doc(e.uid).get().then((function(e){j(e.data().userInfo.roles[0])})));O(!1)}))}),[]);var z={currentUser:r,signUp:S,login:function(e,t){x.signInWithEmailAndPassword(e,t).catch((function(){return w("Authentication failed!")}))},logout:function(){return x.signOut()},roles:u,error:v};return Object(m.jsx)(R.Provider,{value:z,children:!h&&e.children})};var W=function(){var e=Object(c.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),i=Object(s.a)(a,2),j=i[0],d=i[1],h=Object(c.useRef)(),O=Object(c.useRef)(),x=Object(c.useRef)(),f=Object(c.useRef)(),p=k(),g=p.signUp,q=p.login,A=p.error;return Object(m.jsx)(u.a,{width:"full",pt:{base:0,md:12},align:"center",justifyContent:"center",children:Object(m.jsx)(v.a,{borderWidth:{base:0,md:1},width:"full",maxWidth:"500px",px:4,textAlign:"center",borderRadius:4,children:Object(m.jsx)(v.a,{my:4,children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=h.current.value,c=f.current.value;if(d(!0),n)q(t,c);else{var r=O.current.value,a=x.current.value;g(t,c,r,a)}d(!1)},children:[A&&Object(m.jsx)(y.a,{status:"error",children:A}),Object(m.jsx)(l.a,{children:n?"Login":"Register"}),Object(m.jsx)(v.a,{p:4,children:Object(m.jsxs)(S.a,{children:[!n&&Object(m.jsxs)(v.a,{children:[Object(m.jsx)(z.a,{pt:4,htmlFor:"email",children:"First name"}),Object(m.jsx)(C.a,{id:"first-name",type:"text",ref:O,placeholder:"Enter your first name",required:!0}),Object(m.jsx)(z.a,{pt:4,htmlFor:"email",children:"Last name"}),Object(m.jsx)(C.a,{id:"Last-name",type:"text",ref:x,placeholder:"Enter your last name",required:!0})]}),Object(m.jsx)(z.a,{pt:4,htmlFor:"email",children:"Email address"}),Object(m.jsx)(C.a,{id:"email",type:"email",ref:h,placeholder:"Enter your email address",required:!0}),Object(m.jsx)(z.a,{htmlFor:"password",pt:4,children:"Password"}),Object(m.jsx)(C.a,{id:"password",type:"password",ref:f,placeholder:"Enter your password",required:!0})]})}),Object(m.jsx)(b.a,{type:"submit",disabled:j,width:"full",colorScheme:"blue",children:j?"Sending request...":n?"Sign In":"Sign Up"}),Object(m.jsx)(o.b,{pt:2,children:Object(m.jsx)(w.a,{onClick:function(){r((function(e){return!e})),h.current.value="",null!=O.current&&(O.current.value=""),null!=x.current&&(x.current.value=""),f.current.value=""},children:n?"Create new account":"Login with an existing account"})})]})})})})},E=n(310),I=n(46),N=n(301),D=n(302),M=n(303),F=function(e){var t=e.children,n=e.islast,c=e.to,r=void 0===c?"/":c;return Object(m.jsx)(j.a,{mb:{base:n?0:8,sm:0},mr:{base:0,sm:n?0:8},display:"block",fontSize:"lg",fontWeight:"bold",children:Object(m.jsx)(d.b,{to:r,children:t})})},T=function(e){var t=k(),n=t.currentUser,r=t.logout,a=t.roles,o=Object(c.useState)(!1),l=Object(s.a)(o,2),b=l[0],h=l[1],O=Object(i.g)();return Object(m.jsx)(u.a,Object(I.a)(Object(I.a)({as:"nav",mb:4,p:4,bg:"blue.500",color:"white"},e),{},{children:Object(m.jsx)(N.a,{maxW:"container.lg",children:Object(m.jsxs)(u.a,Object(I.a)(Object(I.a)({justify:"space-between",align:"center",wrap:"wrap"},e),{},{children:[Object(m.jsx)(v.a,{children:Object(m.jsx)(j.a,{fontSize:"2xl",fontWeight:"bold",children:Object(m.jsx)(d.b,{to:"/Quiz/",children:"Quiz"})})}),Object(m.jsx)(v.a,{display:{base:"block",md:"none"},onClick:function(){return h(!b)},children:b?Object(m.jsx)(D.a,{}):Object(m.jsx)(M.a,{})}),Object(m.jsx)(v.a,{display:{base:b?"block":"none",md:"block"},flexBasis:{base:"100%",md:"auto"},children:Object(m.jsxs)(u.a,{align:"center",justify:["center","space-between"],direction:["column","row"],children:[n&&a.isAdmin&&Object(m.jsx)(F,{to:"/Quiz/users",children:"Users"}),n&&(a.isMod||a.isAdmin)&&Object(m.jsx)(F,{to:"/Quiz/create-quiz",children:"Create Quiz"}),n?Object(m.jsx)(w.a,{style:{textDecoration:"none"},fontSize:"lg",fontWeight:"bold",islast:"true",onClick:function(e){e.preventDefault(),r(),O.push("/Quiz/")},children:"Logout"}):Object(m.jsx)(F,{to:"/Quiz/auth",islast:"true",children:"Sign In"})]})})]}))})}))},L=n(313),P=n(6),B=n(304),_=n(120);_.Chart.pluginService.register({beforeDraw:function(e){if(e.config.options.elements.center){var t=e.chart.ctx,n=e.config.options.elements.center,c=n.fontStyle||"Arial",r=n.text,a=n.color||"#000",i=n.maxFontSize||75,s=(n.sidePadding||20)/100*(2*e.innerRadius);t.font="30px "+c;var o=t.measureText(r).width,l=2*e.innerRadius-s,u=l/o,j=Math.floor(30*u),b=2*e.innerRadius,d=Math.min(j,b,i),h=n.minFontSize,O=n.lineHeight||25,x=!1;void 0===h&&(h=20),h&&d<h&&(d=h,x=!0),t.textAlign="center",t.textBaseline="middle";var f=(e.chartArea.left+e.chartArea.right)/2,p=(e.chartArea.top+e.chartArea.bottom)/2;if(t.font=d+"px "+c,t.fillStyle=a,!x)return void t.fillText(r,f,p);for(var m=r.split(" "),g="",v=[],w=0;w<m.length;w++){var y=g+m[w]+" ";t.measureText(y).width>l&&w>0?(v.push(g),g=m[w]+" "):g=y}p-=v.length/2*O;for(w=0;w<v.length;w++)t.fillText(v[w],f,p),p+=O;t.fillText(g,f,p)}}});var J=function(e){var t=e.score/e.total*100,n={datasets:[{data:[t,100-t],backgroundColor:["#0087c5","#cde0f1"],borderWidth:.5}]};return Object(m.jsxs)(v.a,{maxW:"500px",w:"full",bg:"blue.500",pb:8,boxShadow:"2xl",overflow:"hidden",rounded:"md",children:[Object(m.jsx)(v.a,{bg:"gray.800",children:Object(m.jsx)(j.a,{color:"white",textAlign:"center",textTransform:"uppercase",fontSize:"20",py:3,children:"Score: ".concat(e.score," / ").concat(e.total)})}),Object(m.jsx)(v.a,{py:4,children:Object(m.jsx)(_.Doughnut,{data:n,width:300,height:200,options:{legend:{display:!1},elements:{center:{text:"".concat(100*(e.score/e.total).toFixed(2),"%"),color:"white"}},tooltips:{enabled:!1}}})})]})},H=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),l=Object(s.a)(a,2),d=l[0],h=l[1],O=Object(c.useState)(!1),x=Object(s.a)(O,2),f=x[0],g=x[1],w=Object(c.useState)(0),y=Object(s.a)(w,2),S=y[0],z=y[1],C=Object(i.h)().quizId-1;Object(c.useEffect)((function(){p.ref("/list").on("value",(function(e){var t=e.val()||null;if(t){var n=Object.values(t);r(n[C])}}))}),[]);return Object(m.jsx)("div",{children:null!==n&&Object(m.jsxs)(B.a,{py:9,flexDirection:"column",children:[Object(m.jsx)(j.a,{textAlign:"center",fontSize:"25",fontWeight:"bold",py:4,children:f?"Quiz Results":"Question ".concat(d+1," of ").concat(n.questions.length)}),!f&&Object(m.jsxs)(v.a,{maxW:"500px",w:"full",bg:"blue.500",pb:8,boxShadow:"2xl",overflow:"hidden",rounded:"md",children:[Object(m.jsx)(v.a,{bg:"gray.800",children:Object(m.jsx)(j.a,{color:"white",textAlign:"center",textTransform:"uppercase",fontSize:"20",py:3,px:10,children:n.questions[d].question})}),Object(m.jsx)(o.c,{spacing:4,pt:8,children:n.questions[d].answers.map((function(e,t){var c;return Object(m.jsx)(b.a,{borderRadius:15,height:45,value:e.isCorrect,onClick:function(){return e.isCorrect&&z(S+1),void(d+1<n.questions.length?h(d+1):g(!0))},children:Object(m.jsxs)(u.a,(c={align:"center",p:4,w:"400px"},Object(P.a)(c,"align","center"),Object(P.a)(c,"children",[Object(m.jsx)(j.a,{fontSize:28,px:2,fontWeight:"bold",children:e.id}),Object(m.jsx)(j.a,{pl:4,fontSize:20,children:e.name})]),c))},t)}))})]}),f&&Object(m.jsx)(J,{score:S,total:n.questions.length})]})})},K=n(19),V=n(305),X=n(306),G=function(){var e=k().currentUser,t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1];Object(c.useEffect)((function(){f.collection("users").get().then((function(e){e.forEach((function(e){a((function(t){return[].concat(Object(K.a)(t),[e.data().userInfo])}))}))}))}),[]);return Object(m.jsx)(N.a,{children:Object(m.jsxs)(V.a,{variant:"simple",children:[Object(m.jsx)(V.e,{children:Object(m.jsxs)(V.f,{children:[Object(m.jsx)(V.d,{children:"Name"}),Object(m.jsx)(V.d,{children:"Email"}),Object(m.jsx)(V.d,{children:"Role"})]})}),Object(m.jsx)(V.b,{children:null!==r&&r.map((function(t,n){return Object(m.jsxs)(V.f,{children:[Object(m.jsx)(V.c,{children:"".concat(t.firstName+" "+t.lastName)}),Object(m.jsx)(V.c,{children:"".concat(t.email)}),Object(m.jsx)(V.c,{w:"full",children:Object(m.jsxs)(X.a,{disabled:t.uid===e.uid,width:170,onChange:function(e){return function(e,t){var n=Object(K.a)(r),c=e.target.value;"mod"===c&&(n[t].roles[0].isAdmin=!1,n[t].roles[0].isMod=!0),"admin"===c&&(n[t].roles[0].isAdmin=!0,n[t].roles[0].isMod=!1),"user"===c&&(n[t].roles[0].isAdmin=!1,n[t].roles[0].isMod=!1),a(n);var i=n[t];f.collection("users").doc(n[t].uid).update({userInfo:i})}(e,n)},defaultValue:(c=t.roles[0],c.isAdmin?"admin":c.isMod?"mod":"user"),children:[Object(m.jsx)("option",{value:"admin",children:"Administrator"}),Object(m.jsx)("option",{value:"mod",children:"Moderator"}),Object(m.jsx)("option",{value:"user",children:"User"})]})})]},n);var c}))})]})})},Y=n(311),Z=n(100),$=n(316),ee=function(){var e=Object(c.useRef)(""),t=Object(Y.a)(),n=Object(i.g)(),r=Object(c.useState)([4]),a=Object(s.a)(r,2),o=a[0],d=a[1],h=Object(c.useState)([[]]),O=Object(s.a)(h,2),x=O[0],f=O[1],g=Object(c.useState)(1),w=Object(s.a)(g,2),y=w[0],q=w[1],A=Object(c.useState)([]),Q=Object(s.a)(A,2),R=Q[0],k=Q[1],U=Object(c.useState)([{}]),W=Object(s.a)(U,2),E=W[0],I=W[1],N=function(){for(var e=[],t=0;t<+y;t++){for(var n=[],c=0;c<o[t];c++)n.push({id:String.fromCharCode(97+c).toUpperCase(),name:x[t][c],isCorrect:R[t]==c});e.push({question:E[t].question,answers:n})}return e};return Object(m.jsxs)(B.a,{py:9,flexDirection:"column",children:[Object(m.jsx)(l.a,{children:"Create Quiz"}),Object(m.jsx)(v.a,{width:700,children:Object(m.jsx)(S.a,{children:Object(m.jsxs)("form",{onSubmit:function(c){c.preventDefault();var r=e.current.value;N(),p.ref().child("/list").push({name:r,questions:N()}),t({position:"bottom-left",title:"Quiz created",description:"Quiz was succesfully created.",status:"success",duration:5e3,isClosable:!0}),n.replace("/Quiz/")},children:[Object(m.jsx)(z.a,{htmlFor:"name",id:"name",children:"Quiz Name"}),Object(m.jsx)(C.a,{required:!0,ref:e,id:"name",type:"text",placeholder:"Enter quiz name",mb:10,width:300}),Object(m.jsx)(j.a,{align:"center",fontSize:"3xl",fontWeight:"bold",children:"Questions"}),E.map((function(e,t){return Object(m.jsxs)(v.a,{pb:20,className:"form-inline",children:[Object(m.jsxs)(v.a,{children:[Object(m.jsxs)(v.a,{mb:10,children:[Object(m.jsx)(z.a,{children:"Question"}),Object(m.jsx)(C.a,{required:!0,type:"text",name:"question",value:e.question||"",onChange:function(e){return function(e,t){var n=Object(K.a)(E);n[e][t.target.name]=t.target.value,I(n)}(t,e)}})]}),Object(m.jsx)(Z.a,{name:"choice".concat(t),children:Object(m.jsx)(v.a,{display:"flex",justifyContent:"space-between",children:Array(o[t]).fill(1).map((function(e,n){return Object(m.jsx)(u.a,{children:Object(m.jsxs)(v.a,{display:"flex",flexWrap:"nowrap",flexDirection:"column",children:[Object(m.jsx)(z.a,{children:"Choice ".concat(n+1)}),Object(m.jsx)(C.a,{required:!0,type:"text",name:"choice",value:x[t][n],onChange:function(e){return function(e,t,n){var c=Object(K.a)(x);c[e][t]=n.target.value,f(c)}(t,n,e)},width:40}),Object(m.jsx)($.a,{isRequired:!0,value:"".concat(n),onClick:function(e){return function(e,t){var n=Object(K.a)(R);n[e]=t.target.value,k(n)}(t,e)},children:"Correct answer"})]},n)})}))})}),Object(m.jsx)(b.a,{mr:6,className:"button add",type:"button",onClick:function(){return function(e){if(o[e]<5){var t=Object(K.a)(o);t[e]++,d(t)}}(t)},children:"Add Choice"}),Object(m.jsx)(b.a,{mr:6,className:"button add",type:"button",onClick:function(){return function(e){if(o[e]>2){var t=Object(K.a)(o);t[e]--,d(t)}}(t)},children:"Remove Choice"})]}),t?Object(m.jsx)(b.a,{mt:30,type:"button",className:"button remove",onClick:function(){return function(e){var t=Object(K.a)(E),n=Object(K.a)(x);t.splice(e,1),n.splice(e,1),I(t),f(n),d((function(e){return e.slice(0,-1)})),k((function(e){return e.slice(0,-1)})),q((function(e){return e-1}))}(t)},children:"Remove"}):null]},t)})),Object(m.jsxs)("div",{className:"button-section",children:[Object(m.jsx)(b.a,{mr:6,className:"button add",type:"button",onClick:function(){I([].concat(Object(K.a)(E),[[]])),f([].concat(Object(K.a)(x),[[]])),d([].concat(Object(K.a)(o),[4])),k([].concat(Object(K.a)(R),[1])),q((function(e){return e+1}))},children:"Add question"}),Object(m.jsx)(b.a,{className:"button submit",type:"submit",children:"Submit"})]})]})})})]})},te=n(121),ne=["component"],ce=["component"];function re(e){var t=e.component,n=Object(te.a)(e,ne),c=k(),r=c.currentUser,a=c.roles;return Object(m.jsx)(i.b,Object(I.a)(Object(I.a)({},n),{},{render:function(e){return(a.isMod||a.isAdmin)&&r?Object(m.jsx)(t,Object(I.a)({},e)):Object(m.jsx)(i.a,{to:"/Quiz/"})}}))}function ae(e){var t=e.component,n=Object(te.a)(e,ce),c=k(),r=c.currentUser,a=c.roles;return Object(m.jsx)(i.b,Object(I.a)(Object(I.a)({},n),{},{render:function(e){return a.isAdmin&&r?Object(m.jsx)(t,Object(I.a)({},e)):Object(m.jsx)(i.a,{to:"/Quiz/"})}}))}var ie=function(){return Object(m.jsx)(L.a,{children:Object(m.jsxs)(U,{children:[Object(m.jsx)(E.a,{}),Object(m.jsx)(T,{}),Object(m.jsxs)(i.d,{children:[Object(m.jsx)(i.b,{path:"/Quiz/",exact:!0,component:g}),Object(m.jsx)(i.b,{path:"/Quiz/auth",component:W}),Object(m.jsx)(re,{path:"/Quiz/create-quiz",component:ee}),Object(m.jsx)(ae,{path:"/Quiz/users",component:G}),Object(m.jsx)(i.b,{path:"/Quiz/quiz/:quizId",component:H}),Object(m.jsx)(i.b,{path:"*",children:Object(m.jsx)(i.a,{to:"/Quiz/"})})]})]})})};a.a.render(Object(m.jsx)(d.a,{children:Object(m.jsx)(ie,{})}),document.getElementById("root"))}},[[268,1,2]]]);
//# sourceMappingURL=main.59246c4f.chunk.js.map